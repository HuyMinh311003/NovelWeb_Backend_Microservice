CREATE DATABASE historydb;

use webnovel;

CREATE TABLE users (
    Id INT AUTO_INCREMENT PRIMARY KEY,
    Username VARCHAR(255) NOT NULL,
    Email VARCHAR(255) NOT NULL,
    Password VARCHAR(255) NOT NULL
);

CREATE TABLE novels (
    Id INT AUTO_INCREMENT PRIMARY KEY,
    Title VARCHAR(255) NOT NULL,
    Author VARCHAR(255),
    Genre VARCHAR(255),
    CreatedDate DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE ReadingHistory (
    Id INT AUTO_INCREMENT PRIMARY KEY,
    UserId INT NOT NULL,
    NovelId INT NOT NULL,
    ChapterID INT,
    LastReadDate DATETIME DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY `UniqueUserNovel` (UserId, NovelId)
);